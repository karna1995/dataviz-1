<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dataviz</title>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/highcharts.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
<style>
.chart  {
    min-height: 250px;
    min-width: 250px;
}

.placeholder {
    background-color: lightblue;
    min-height: 250px;
    min-width: 250px;
    text-align: center;
}

.placeholder:hover {
    background-color: lightgreen;
    cursor: pointer;
}
.placeholder:hover h1:after  {
    content: "Add New Chart";
}

</style>
<body>
    <script>
    $(document).ready(function() {
        fetchEnvs();
        //restoreEnv("data");
    });

    $("body").on("click", ".placeholder", function() {
        var thePlaceholder = $(this);
        bspopup({
            type: "radiolist",
            text: "Enter saved filename: ",
            list: lastEnvList,
            success: function(ev) {
                console.log("success!", ev.value);
                filename = ev.value;
                if (filename==null || filename.length==0) return;
                console.log('.placeholder_click');
                thePlaceholder.removeClass("placeholder").addClass("chartContainer"); //swap placeholder for a proper class
                thePlaceholder.html('<div id="theChart" class="chart"></div>'); 
                console.log('$("#theChart").length', $("#theChart").length);
                restoreEnv(filename, function(data) {
                    if (data.indexOf("not found")>-1) {
                        $("#theChart").parent().remove();
                        $("#theChart").remove();
                    }
                    else {
                        $("#theChart").attr("id", "");
                    }
                    $(".main.row").append('<div class="placeholder col-md-5"><h1></h1></div>'); //add a new placeholder
                });
            }
        });
        
        
    });
    </script>
    <div class="container">
        <div class="row main">
                <div class="placeholder col-md-5"><h1></h1></div>
        </div>
    </div>
</body>
